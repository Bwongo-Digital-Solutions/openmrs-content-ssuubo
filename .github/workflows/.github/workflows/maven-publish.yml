# name: Publish Maven package

# on:
#   push:
#     tags:
#       - 'v*'        # publish on tags like v1.2.3; change trigger if needed
#   workflow_dispatch:   # allow manual runs

# permissions:
#   contents: read
#   packages: write

# jobs:
#   publish:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       - name: Set up JDK 17
#         uses: actions/setup-java@v3
#         with:
#           distribution: 'temurin'
#           java-version: '17'
#           server-id: cliniemr                       # must match <id> in distributionManagement
#           server-username: ${{ github.actor }}     # username for Maven authentication
#           server-password: ${{ secrets.GITHUB_TOKEN }}  # GITHUB_TOKEN works for repo package publishing

#       - name: Build and deploy
#         run: mvn -B -DskipTests clean deploy



name: Publish Ssuubo Content Package

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:

jobs:
  publish:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Set up Java
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: 11
          server-id: ssuubo
          settings-path: ${{ github.workspace }}

      - name: Publish to GitHub Packages
        run: mvn deploy
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
